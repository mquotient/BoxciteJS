<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Test Login</title>
		<script src="xmlrpc.js"></script>
		<script src="boxcite.js"></script>
		<style>
			form {
				margin: 16px; padding: 10px 20px;
				width: 480px;
			}
			label { margin: 12px auto; display: block; }
			input { float: right; }
		</style>
	</head>
	<body>
		<form id="login_form" method="post">
			<label>Username: <input type="text" id="username" value="sreejith" /></label>
			<label>Password: <input type="password" id="password" value="mquotient" /></label>
			<label>Submit the credentials here: <input type="submit" value="Login" onclick="login();" /></label>
			<label>Successfully logged-in? Now: <input type="submit" value="Logout" onclick="logout();" /></label>
		</form>
		<form id="contact_form" method="post">
			<label>First Name: <input type="text" id="first_name" value="Sreejith" /></label>
			<label>Last Name: <input type="text" id="last_name" value="Narayanan" /></label>
			<label>Add Contact: <input type="submit" value="Go!" onclick="addContact();" /></label>
		</form>
		<script>
			user.URL = "http://sreejith.dyndns-home.com:18080/xmlrpc/";
			contact.URL = "http://sreejith.dyndns-home.com:18080/xmlrpc/";
			function login () {
				var data = {
					username : document.getElementById("username").value,
					password : document.getElementById("password").value
				}
				var response = user.login( data );
				if (response.success == true) {
					alert("Logged In!");
				}
				else {
					alert(response.fail_message);
				}
 			}
 			function logout () {
				var response = user.logout();
				if (response.success == true) {
					alert("Logged Out!");
				}
				else {
					alert(response.fail_message);
				}
 			}
 			function addContact () {
 				var data = { data : {
 					first_name : document.getElementById("first_name").value,
 					last_name : document.getElementById("last_name").value
 				}}
 				try {
				var response = contact.create( data );
					console.log(response);
				} catch ( err ) {
					alert( err );
				}
				if (response.success == true) {
					alert("Record Added!");
				}
				else {
					alert(response.fail_message);
				}
 			}
		</script>
	</body>
</html>
